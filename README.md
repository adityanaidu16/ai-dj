# AI DJ - Intelligent Music Discovery Assistant

## Problem

Spotify's recommendation endpoints have been deprecated for third-party developers, and Spotify's own DJ feature lacks interactive capabilities. Users can't have natural conversations about music preferences or get contextually aware recommendations based on specific songs they like.

## Solution

AI DJ bridges this gap by combining Cloudflare's Llama 3.1 LLM with Spotify's search API to create an intelligent music discovery system. Instead of relying on deprecated endpoints, it generates sophisticated search strategies based on natural language conversations, understanding the actual vibe and characteristics of referenced songs.

## Key Features

- **Natural Language Understanding**: Chat with an AI that understands music context and preferences
- **Dynamic Search Generation**: Creates multiple search strategies based on mood, energy, and style
- **Smart Song Analysis**: When you say "songs like Currents by Drake", it understands the introspective, mellow vibe
- **Conversational Flow**: Asks relevant follow-up questions when needed to better understand preferences
- **No Hardcoded Logic**: All recommendations are dynamically generated by the LLM

## Architecture

Built on Cloudflare's edge platform:
- **Cloudflare Workers** for serverless compute
- **Workers AI** with Llama 3.1 70B for language processing
- **Durable Objects** for session state management
- **KV Storage** for caching Spotify tokens
- **Hono Framework** for API routing

## Setup

### Prerequisites
- Node.js 20+
- Cloudflare account
- Spotify Developer account ([create app here](https://developer.spotify.com/dashboard))

### Installation

1. Clone the repository:
```bash
git clone https://github.com/adityanaidu16/ai-dj.git
cd ai-dj
```

2. Install dependencies:
```bash
npm install
```

3. Get Spotify credentials:
   - Create an app at https://developer.spotify.com/dashboard
   - Copy your Client ID and Client Secret

4. Configure credentials in `wrangler.toml`:
```toml
[vars]
SPOTIFY_CLIENT_ID = "your_client_id"
SPOTIFY_CLIENT_SECRET = "your_client_secret"
```

5. Create KV namespaces:
```bash
npx wrangler kv:namespace create "CACHE"
npx wrangler kv:namespace create "PLAYLISTS"
```

6. Update the namespace IDs in `wrangler.toml` with the output from step 5

7. Run locally:
```bash
npm run dev
```

Visit http://localhost:8787 to start chatting with your AI DJ.

## How It Works

1. **User Request**: "Give me songs like Currents by Drake"
2. **Context Detection**: AI identifies the song reference and analyzes its characteristics
3. **Search Strategy**: Generates searches like "introspective hip hop", "Toronto R&B", "melodic rap"
4. **Spotify Search**: Queries playlists and tracks matching the vibe
5. **Smart Filtering**: Ranks results by popularity and relevance
6. **Response**: Returns 20 curated tracks that actually match the mood

## API Endpoints

- `GET /` - Chat interface
- `POST /api/chat` - Process messages and get recommendations
- `POST /api/preferences` - Update user preferences
- `GET /api/session/:id` - Retrieve session data

## Tech Stack

- TypeScript
- Cloudflare Workers & Workers AI
- Spotify Web API
- Hono Framework
- Durable Objects

## Deployment

```bash
npm run deploy
```

## License

ISC